import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import { toast } from '@/hooks/use-toast';

export type Language = 'en' | 'es' | 'fr' | 'pt' | 'pidgin';

export const translations = {
  en: {
    startGame: "Start Game",
    joinParty: "Join Party",
    submitted: "Submitted!",
    submitAnswer: "Submit Answer",
    startingGame: "Starting game...",
    submitCaption: "Submit Caption",
    submitStatement: "Submit Statement",
    timeRemaining: "Time Remaining",
    yourAnswer: "Your Answer",
    voteForBestAnswer: "Vote for the Best Answer!",
    voteForThis: "Vote for This",
    voteForFunniestCaption: "Vote for the Funniest Caption!",
    whichStatementAIWrote: "Which statement do you think the AI wrote?",
    voted: "Voted!",
    yourCaption: "Your Caption",
    yourStatement: "Your Statement",
    roomNotFound: "Room not found. Please check your code and try again.",
    partyEnded: "This party has ended, but you can start a new one!",
    startNewParty: "Start a New Party",
    waiting: "Waiting for other players...",
    voting: "Vote for your favorite",
    winner: "Winner",
    playAgain: "Play Again",
    shareWhatsApp: "Share on WhatsApp",
    partyFeed: "Party Feed",
    addSimulated: "Add simulated players",
    roomCode: "Room Code",
    createRoom: "Create Room",
    roomCreated: "Room Created!",
    startParty: "Start a Party",
    joinAParty: "Join a Party",
    enterRoomCode: "Enter room code",
    join: "Join",
    selectGameMode: "Select Game Mode",
    players: "Players",
    host: "Host",
    leave: "Leave",
    shareLink: "Share Link",
    copied: "Copied!",
    playerName: "Player Name",
    enterName: "Enter your name",
    viewPartyFeed: "View Party Feed",
    noRecaps: "No game recaps yet. Start playing to see them here!",
    backToLobby: "Back to Lobby",
    leaveGame: "Leave Game",
    mostBelieved: "Most Believed",
    aiFakeRevealed: "AI Fake Revealed",
    correctAnswers: "Correct Answers",
    writeCaption: "Write a Funny Caption for This Picture",
    whichAIWrote: "Which One Do You Think AI Wrote?",
    voteAsFake: "Vote as Fake",
    joinTheParty: "Join the Party!",
    chooseGameMode: "Choose how you want to play",
    testWithBots: "Test the game solo with AI players",
    you: "(You)",
    bot: "BOT",
    waitingForPlayers: "Waiting for more players to join...",
    welcomeToQuippy: "Welcome to Quippy",
    tagline: "The party game that brings everyone together through WhatsApp!",
    createRoomDesc: "Create a new room and invite your friends via WhatsApp",
    enterRoomDesc: "Enter a room code to join your friends",
    quickGames: "Quick Games",
    whatsappFirst: "WhatsApp First",
    customThemes: "Custom Themes",
    shareTheFun: "Share the fun with your friends on WhatsApp! üöÄ",
    simulatedPlayersAdded: "Simulated players added!",
    aiPlayersJoined: "AI players joined the party",
    simulatedPlayersRemoved: "Simulated players removed",
    realPlayersOnly: "Real players only now",
    joined: "Joined!",
    welcomeToParty: "Welcome to the party",
    whoWroteThis: "Who Wrote This?",
    captionCascade: "Caption Cascade",
    twoTruthsBot: "Two Truths and a Bot",
    instantTrivia: "Instant Trivia",
    whoWroteThisDesc: "Spot the AI-generated answer among real responses",
    captionCascadeDesc: "Write the funniest caption for a hilarious image",
    twoTruthsBotDesc: "Guess which statement was written by AI",
    instantTriviaDesc: "Test your knowledge with quick trivia questions",
    writeTrueStatement: "Write one true statement about yourself",
    placeholderCaption: "Write a funny caption...",
    placeholderTruth: "Write one true fact about yourself...",
    placeholderAnswer: "Type your answer here...",
    mostBelievedStatement: "Most Believed Statement!",
    votesThoughtFake: "Only {count} vote thought this was fake!",
    aiFakeStatementRevealed: "AI Fake Statement Revealed:",
    playersGuessedCorrectly: "{count} player correctly guessed this was fake!",
    error: "Error",
    joining: "Joining...",
    creating: "Creating...",
    howToPlay: "How to Play",
    step1: "1. Create or join a room",
    step2: "2. Share the link with friends via WhatsApp",
    step3: "3. Play together in real-time - no app needed!",
    simulatedPlayersHelp: "AI players let you test the game solo or fill empty rooms while waiting for friends",
  },
  es: {
    startGame: "Comenzar Juego",
    joinParty: "Unirse a la Fiesta",
    submitted: "¬°Enviado!",
    submitAnswer: "Enviar Respuesta",
    startingGame: "Iniciando juego...",
    submitCaption: "Enviar T√≠tulo",
    submitStatement: "Enviar Declaraci√≥n",
    timeRemaining: "Tiempo Restante",
    yourAnswer: "Tu Respuesta",
    voteForBestAnswer: "¬°Vota por la Mejor Respuesta!",
    voteForThis: "Votar por Esto",
    voteForFunniestCaption: "¬°Vota por el T√≠tulo M√°s Gracioso!",
    whichStatementAIWrote: "¬øQu√© declaraci√≥n crees que escribi√≥ la IA?",
    voted: "¬°Votado!",
    yourCaption: "Tu T√≠tulo",
    yourStatement: "Tu Declaraci√≥n",
    roomNotFound: "Sala no encontrada. Verifica tu c√≥digo e intenta de nuevo.",
    partyEnded: "¬°Esta fiesta ha terminado, pero puedes empezar una nueva!",
    startNewParty: "Empezar una Nueva Fiesta",
    waiting: "Esperando a otros jugadores...",
    voting: "Vota por tu favorito",
    winner: "Ganador",
    playAgain: "Jugar de Nuevo",
    shareWhatsApp: "Compartir en WhatsApp",
    partyFeed: "Historial de Partidas",
    addSimulated: "A√±adir jugadores simulados",
    roomCode: "C√≥digo de Sala",
    createRoom: "Crear Sala",
    roomCreated: "¬°Sala Creada!",
    startParty: "Comenzar una Fiesta",
    joinAParty: "Unirse a una Fiesta",
    enterRoomCode: "C√≥digo de sala",
    join: "Unirse",
    selectGameMode: "Seleccionar Modo de Juego",
    players: "Jugadores",
    host: "Anfitri√≥n",
    leave: "Salir",
    shareLink: "Compartir Enlace",
    copied: "¬°Copiado!",
    playerName: "Nombre del Jugador",
    enterName: "Ingresa tu nombre",
    viewPartyFeed: "Ver Historial",
    noRecaps: "A√∫n no hay res√∫menes. ¬°Empieza a jugar para verlos aqu√≠!",
    backToLobby: "Volver al Lobby",
    leaveGame: "Salir del Juego",
    mostBelieved: "M√°s Cre√≠do",
    aiFakeRevealed: "IA Falsa Revelada",
    correctAnswers: "Respuestas Correctas",
    writeCaption: "Escribe un T√≠tulo Gracioso para Esta Imagen",
    whichAIWrote: "¬øCu√°l Crees que Escribi√≥ la IA?",
    voteAsFake: "Votar como Falso",
    joinTheParty: "¬°√önete a la Fiesta!",
    chooseGameMode: "Elige c√≥mo quieres jugar",
    testWithBots: "Prueba el juego solo con jugadores IA",
    you: "(T√∫)",
    bot: "BOT",
    waitingForPlayers: "Esperando que se unan m√°s jugadores...",
    welcomeToQuippy: "Bienvenido a Quippy",
    tagline: "¬°El juego de fiesta que une a todos a trav√©s de WhatsApp!",
    createRoomDesc: "Crea una sala nueva e invita a tus amigos por WhatsApp",
    enterRoomDesc: "Ingresa un c√≥digo de sala para unirte a tus amigos",
    quickGames: "Juegos R√°pidos",
    whatsappFirst: "WhatsApp Primero",
    customThemes: "Temas Personalizados",
    shareTheFun: "¬°Comparte la diversi√≥n con tus amigos en WhatsApp! üöÄ",
    simulatedPlayersAdded: "¬°Jugadores simulados a√±adidos!",
    aiPlayersJoined: "Jugadores IA se unieron a la fiesta",
    simulatedPlayersRemoved: "Jugadores simulados eliminados",
    realPlayersOnly: "Solo jugadores reales ahora",
    joined: "¬°Te uniste!",
    welcomeToParty: "Bienvenido a la fiesta",
    whoWroteThis: "¬øQui√©n Escribi√≥ Esto?",
    captionCascade: "Cascada de T√≠tulos",
    twoTruthsBot: "Dos Verdades y un Bot",
    instantTrivia: "Trivia Instant√°nea",
    whoWroteThisDesc: "Identifica la respuesta generada por IA entre respuestas reales",
    captionCascadeDesc: "Escribe el t√≠tulo m√°s divertido para una imagen graciosa",
    twoTruthsBotDesc: "Adivina qu√© declaraci√≥n fue escrita por IA",
    instantTriviaDesc: "Pon a prueba tus conocimientos con preguntas r√°pidas",
    writeTrueStatement: "Escribe una declaraci√≥n verdadera sobre ti",
    placeholderCaption: "Escribe un t√≠tulo gracioso...",
    placeholderTruth: "Escribe un hecho verdadero sobre ti...",
    placeholderAnswer: "Escribe tu respuesta aqu√≠...",
    mostBelievedStatement: "¬°Declaraci√≥n M√°s Cre√≠da!",
    votesThoughtFake: "¬°Solo {count} voto pens√≥ que esto era falso!",
    aiFakeStatementRevealed: "Declaraci√≥n Falsa de IA Revelada:",
    playersGuessedCorrectly: "¬°{count} jugador adivin√≥ correctamente que era falso!",
    error: "Error",
    joining: "Uni√©ndose...",
    creating: "Creando...",
    howToPlay: "C√≥mo Jugar",
    step1: "1. Crea o √∫nete a una sala",
    step2: "2. Comparte el enlace con amigos por WhatsApp",
    step3: "3. Jueguen juntos en tiempo real - ¬°sin app!",
    simulatedPlayersHelp: "Los jugadores IA te permiten probar el juego solo o llenar salas vac√≠as mientras esperas amigos",
  },
  fr: {
    startGame: "Commencer le Jeu",
    joinParty: "Rejoindre la F√™te",
    submitted: "Soumis!",
    submitAnswer: "Soumettre une R√©ponse",
    startingGame: "D√©marrage du jeu...",
    submitCaption: "Soumettre une L√©gende",
    submitStatement: "Soumettre une D√©claration",
    timeRemaining: "Temps Restant",
    yourAnswer: "Votre R√©ponse",
    voteForBestAnswer: "Votez pour la Meilleure R√©ponse!",
    voteForThis: "Voter pour Ceci",
    voteForFunniestCaption: "Votez pour la L√©gende la Plus Dr√¥le!",
    whichStatementAIWrote: "Quelle d√©claration pensez-vous que l'IA a √©crite?",
    voted: "Vot√©!",
    yourCaption: "Votre L√©gende",
    yourStatement: "Votre D√©claration",
    roomNotFound: "Salle introuvable. V√©rifiez votre code et r√©essayez.",
    partyEnded: "Cette f√™te est termin√©e, mais vous pouvez en cr√©er une nouvelle!",
    startNewParty: "Cr√©er une Nouvelle F√™te",
    waiting: "En attente d'autres joueurs...",
    voting: "Votez pour votre favori",
    winner: "Gagnant",
    playAgain: "Rejouer",
    shareWhatsApp: "Partager sur WhatsApp",
    partyFeed: "Historique des Parties",
    addSimulated: "Ajouter des joueurs simul√©s",
    roomCode: "Code de Salle",
    createRoom: "Cr√©er une Salle",
    roomCreated: "Salle Cr√©√©e!",
    startParty: "Commencer une F√™te",
    joinAParty: "Rejoindre une F√™te",
    enterRoomCode: "Code de salle",
    join: "Rejoindre",
    selectGameMode: "S√©lectionner le Mode de Jeu",
    players: "Joueurs",
    host: "H√¥te",
    leave: "Quitter",
    shareLink: "Partager le Lien",
    copied: "Copi√©!",
    playerName: "Nom du Joueur",
    enterName: "Entrez votre nom",
    viewPartyFeed: "Voir l'Historique",
    noRecaps: "Aucun r√©sum√© pour le moment. Commencez √† jouer pour les voir ici!",
    backToLobby: "Retour au Lobby",
    leaveGame: "Quitter le Jeu",
    mostBelieved: "Le Plus Cru",
    aiFakeRevealed: "IA Faux R√©v√©l√©",
    correctAnswers: "R√©ponses Correctes",
    writeCaption: "√âcrivez une L√©gende Dr√¥le pour Cette Image",
    whichAIWrote: "Lequel Pensez-vous que l'IA a √âcrit?",
    voteAsFake: "Voter comme Faux",
    joinTheParty: "Rejoignez la F√™te!",
    chooseGameMode: "Choisissez comment vous voulez jouer",
    testWithBots: "Testez le jeu en solo avec des joueurs IA",
    you: "(Vous)",
    bot: "BOT",
    waitingForPlayers: "En attente de plus de joueurs...",
    welcomeToQuippy: "Bienvenue sur Quippy",
    tagline: "Le jeu de f√™te qui rassemble tout le monde via WhatsApp!",
    createRoomDesc: "Cr√©ez une nouvelle salle et invitez vos amis via WhatsApp",
    enterRoomDesc: "Entrez un code de salle pour rejoindre vos amis",
    quickGames: "Jeux Rapides",
    whatsappFirst: "WhatsApp d'Abord",
    customThemes: "Th√®mes Personnalis√©s",
    shareTheFun: "Partagez le plaisir avec vos amis sur WhatsApp! üöÄ",
    simulatedPlayersAdded: "Joueurs simul√©s ajout√©s!",
    aiPlayersJoined: "Joueurs IA ont rejoint la f√™te",
    simulatedPlayersRemoved: "Joueurs simul√©s supprim√©s",
    realPlayersOnly: "Seulement des vrais joueurs maintenant",
    joined: "Rejoint!",
    welcomeToParty: "Bienvenue √† la f√™te",
    whoWroteThis: "Qui a √âcrit √áa?",
    captionCascade: "Cascade de L√©gendes",
    twoTruthsBot: "Deux V√©rit√©s et un Bot",
    instantTrivia: "Trivia Instantan√©",
    whoWroteThisDesc: "Rep√©rez la r√©ponse g√©n√©r√©e par IA parmi les vraies",
    captionCascadeDesc: "√âcrivez la l√©gende la plus dr√¥le pour une image hilarante",
    twoTruthsBotDesc: "Devinez quelle d√©claration a √©t√© √©crite par IA",
    instantTriviaDesc: "Testez vos connaissances avec des questions rapides",
    writeTrueStatement: "√âcrivez une d√©claration vraie sur vous",
    placeholderCaption: "√âcrivez une l√©gende dr√¥le...",
    placeholderTruth: "√âcrivez un fait vrai sur vous...",
    placeholderAnswer: "Tapez votre r√©ponse ici...",
    mostBelievedStatement: "D√©claration la Plus Crue!",
    votesThoughtFake: "Seulement {count} vote pensait que c'√©tait faux!",
    aiFakeStatementRevealed: "Fausse D√©claration IA R√©v√©l√©e:",
    playersGuessedCorrectly: "{count} joueur a correctement devin√© que c'√©tait faux!",
    error: "Erreur",
    joining: "Rejoignant...",
    creating: "Cr√©ation...",
    howToPlay: "Comment Jouer",
    step1: "1. Cr√©ez ou rejoignez une salle",
    step2: "2. Partagez le lien avec des amis via WhatsApp",
    step3: "3. Jouez ensemble en temps r√©el - aucune app requise!",
    simulatedPlayersHelp: "Les joueurs IA vous permettent de tester le jeu seul ou de remplir les salles vides en attendant des amis",
  },
  pt: {
    startGame: "Come√ßar Jogo",
    joinParty: "Entrar na Festa",
    submitted: "Enviado!",
    submitAnswer: "Enviar Resposta",
    startingGame: "Iniciando jogo...",
    submitCaption: "Enviar Legenda",
    submitStatement: "Enviar Declara√ß√£o",
    timeRemaining: "Tempo Restante",
    yourAnswer: "Sua Resposta",
    voteForBestAnswer: "Vote na Melhor Resposta!",
    voteForThis: "Votar Nisto",
    voteForFunniestCaption: "Vote na Legenda Mais Engra√ßada!",
    whichStatementAIWrote: "Qual declara√ß√£o voc√™ acha que a IA escreveu?",
    voted: "Votado!",
    yourCaption: "Sua Legenda",
    yourStatement: "Sua Declara√ß√£o",
    roomNotFound: "Sala n√£o encontrada. Verifique seu c√≥digo e tente novamente.",
    partyEnded: "Esta festa terminou, mas voc√™ pode come√ßar uma nova!",
    startNewParty: "Come√ßar uma Nova Festa",
    waiting: "Aguardando outros jogadores...",
    voting: "Vote no seu favorito",
    winner: "Vencedor",
    playAgain: "Jogar Novamente",
    shareWhatsApp: "Compartilhar no WhatsApp",
    partyFeed: "Hist√≥rico de Partidas",
    addSimulated: "Adicionar jogadores simulados",
    roomCode: "C√≥digo da Sala",
    createRoom: "Criar Sala",
    roomCreated: "Sala Criada!",
    startParty: "Come√ßar uma Festa",
    joinAParty: "Entrar numa Festa",
    enterRoomCode: "C√≥digo da sala",
    join: "Entrar",
    selectGameMode: "Selecionar Modo de Jogo",
    players: "Jogadores",
    host: "Anfitri√£o",
    leave: "Sair",
    shareLink: "Compartilhar Link",
    copied: "Copiado!",
    playerName: "Nome do Jogador",
    enterName: "Digite seu nome",
    viewPartyFeed: "Ver Hist√≥rico",
    noRecaps: "Ainda n√£o h√° resumos. Comece a jogar para v√™-los aqui!",
    backToLobby: "Voltar ao Lobby",
    leaveGame: "Sair do Jogo",
    mostBelieved: "Mais Acreditado",
    aiFakeRevealed: "IA Falso Revelado",
    correctAnswers: "Respostas Corretas",
    writeCaption: "Escreva uma Legenda Engra√ßada para Esta Imagem",
    whichAIWrote: "Qual Voc√™ Acha que a IA Escreveu?",
    voteAsFake: "Votar como Falso",
    joinTheParty: "Entre na Festa!",
    chooseGameMode: "Escolha como voc√™ quer jogar",
    testWithBots: "Teste o jogo sozinho com jogadores IA",
    you: "(Voc√™)",
    bot: "BOT",
    waitingForPlayers: "Aguardando mais jogadores...",
    welcomeToQuippy: "Bem-vindo ao Quippy",
    tagline: "O jogo de festa que une todos atrav√©s do WhatsApp!",
    createRoomDesc: "Crie uma nova sala e convide seus amigos via WhatsApp",
    enterRoomDesc: "Digite um c√≥digo de sala para se juntar aos seus amigos",
    quickGames: "Jogos R√°pidos",
    whatsappFirst: "WhatsApp Primeiro",
    customThemes: "Temas Personalizados",
    shareTheFun: "Compartilhe a divers√£o com seus amigos no WhatsApp! üöÄ",
    simulatedPlayersAdded: "Jogadores simulados adicionados!",
    aiPlayersJoined: "Jogadores IA se juntaram √† festa",
    simulatedPlayersRemoved: "Jogadores simulados removidos",
    realPlayersOnly: "Apenas jogadores reais agora",
    joined: "Entrou!",
    welcomeToParty: "Bem-vindo √† festa",
    whoWroteThis: "Quem Escreveu Isso?",
    captionCascade: "Cascata de Legendas",
    twoTruthsBot: "Duas Verdades e um Bot",
    instantTrivia: "Trivia Instant√¢nea",
    whoWroteThisDesc: "Identifique a resposta gerada por IA entre as reais",
    captionCascadeDesc: "Escreva a legenda mais engra√ßada para uma imagem hil√°ria",
    twoTruthsBotDesc: "Adivinhe qual declara√ß√£o foi escrita por IA",
    instantTriviaDesc: "Teste seu conhecimento com perguntas r√°pidas",
    writeTrueStatement: "Escreva uma declara√ß√£o verdadeira sobre voc√™",
    placeholderCaption: "Escreva uma legenda engra√ßada...",
    placeholderTruth: "Escreva um fato verdadeiro sobre voc√™...",
    placeholderAnswer: "Digite sua resposta aqui...",
    mostBelievedStatement: "Declara√ß√£o Mais Acreditada!",
    votesThoughtFake: "Apenas {count} voto achou que era falso!",
    aiFakeStatementRevealed: "Declara√ß√£o Falsa da IA Revelada:",
    playersGuessedCorrectly: "{count} jogador adivinhou corretamente que era falso!",
    error: "Erro",
    joining: "Entrando...",
    creating: "Criando...",
    howToPlay: "Como Jogar",
    step1: "1. Crie ou entre em uma sala",
    step2: "2. Compartilhe o link com amigos via WhatsApp",
    step3: "3. Joguem juntos em tempo real - sem app!",
    simulatedPlayersHelp: "Jogadores IA permitem testar o jogo sozinho ou preencher salas vazias enquanto espera amigos",
  },
  pidgin: {
    startGame: "Start di Game",
    joinParty: "Join di Party",
    submitted: "E Don Send!",
    submitAnswer: "Send Your Answer",
    startingGame: "Game dey start...",
    submitCaption: "Write Wetin You See",
    submitStatement: "Talk Your Own",
    timeRemaining: "Time Wey Remain",
    yourAnswer: "Your Answer",
    voteForBestAnswer: "Vote for di Best Answer!",
    voteForThis: "Vote This One",
    voteForFunniestCaption: "Vote for di Funniest Caption!",
    whichStatementAIWrote: "Which talk you think AI write?",
    voted: "Don Vote!",
    yourCaption: "Your Caption",
    yourStatement: "Your Talk",
    roomNotFound: "We no see dis room. Check your code try again.",
    partyEnded: "Dis party don finish, but you fit start new one!",
    startNewParty: "Start New Party",
    waiting: "We dey wait for other people...",
    voting: "Vote for di one wey sweet you",
    winner: "Winner",
    playAgain: "Make We Play Again",
    shareWhatsApp: "Share am for WhatsApp",
    partyFeed: "All di Games Wey We Don Play",
    addSimulated: "Add fake players",
    roomCode: "Room Code",
    createRoom: "Make Room",
    roomCreated: "Room Don Ready!",
    startParty: "Start Party",
    joinAParty: "Join Party",
    enterRoomCode: "Room code",
    join: "Join",
    selectGameMode: "Choose Game Mode",
    players: "Players",
    host: "Host",
    leave: "Comot",
    shareLink: "Share Link",
    copied: "Don Copy!",
    playerName: "Your Name",
    enterName: "Put your name",
    viewPartyFeed: "See Game History",
    noRecaps: "No game recap yet. Start play make you see am here!",
    backToLobby: "Go Back",
    leaveGame: "Comot for Game",
    mostBelieved: "Person Wey Everybody Believe",
    aiFakeRevealed: "Na AI Write This One",
    correctAnswers: "People Wey Answer Correct",
    writeCaption: "Write Funny Caption for This Picture",
    whichAIWrote: "Which One You Think AI Write?",
    voteAsFake: "Vote Say Na Fake",
    joinTheParty: "Join di Party!",
    chooseGameMode: "Choose how you wan play",
    testWithBots: "Try di game with fake players",
    you: "(Na You)",
    bot: "BOT",
    waitingForPlayers: "We dey wait for more people...",
    welcomeToQuippy: "Welcome to Quippy",
    tagline: "Di party game wey bring everybody together for WhatsApp!",
    createRoomDesc: "Start new room and invite your friends for WhatsApp",
    enterRoomDesc: "Put room code make you join your friends",
    quickGames: "Quick Games",
    whatsappFirst: "WhatsApp First",
    customThemes: "Custom Themes",
    shareTheFun: "Share di fun with your friends for WhatsApp! üöÄ",
    simulatedPlayersAdded: "Fake players don add!",
    aiPlayersJoined: "AI players don join di party",
    simulatedPlayersRemoved: "Fake players don comot",
    realPlayersOnly: "Na only real players now",
    joined: "You Don Join!",
    welcomeToParty: "Welcome to di party",
    whoWroteThis: "Who Write Am?",
    captionCascade: "Caption Game",
    twoTruthsBot: "Two Truth and Bot",
    instantTrivia: "Quick Questions",
    whoWroteThisDesc: "Find di answer wey AI write among real people answer",
    captionCascadeDesc: "Write funny caption for picture",
    twoTruthsBotDesc: "Guess which talk na AI write",
    instantTriviaDesc: "Answer quick questions show say you sabi",
    writeTrueStatement: "Write one true talk about yourself",
    placeholderCaption: "Write funny caption...",
    placeholderTruth: "Write one true thing about you...",
    placeholderAnswer: "Put your answer here...",
    mostBelievedStatement: "Talk Wey Everybody Believe!",
    votesThoughtFake: "Only {count} person vote say na fake!",
    aiFakeStatementRevealed: "Na This One AI Write:",
    playersGuessedCorrectly: "{count} person guess am correct!",
    error: "Wahala",
    joining: "Dey Join...",
    creating: "Dey Create...",
    howToPlay: "How to Play",
    step1: "1. Make room or join room",
    step2: "2. Share di link for WhatsApp",
    step3: "3. Play together - no need to download app!",
    simulatedPlayersHelp: "AI players go help you test di game alone or fill empty room while you dey wait for your people",
  },
};

export const languageNames: Record<Language, string> = {
  en: "üá∫üá∏ English",
  es: "üá™üá∏ Espa√±ol",
  fr: "üá´üá∑ Fran√ßais",
  pt: "üáßüá∑ Portugu√™s",
  pidgin: "üá≥üá¨ Pidgin",
};

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: keyof typeof translations.en) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

const STORAGE_KEY = 'userLanguage';
const FIRST_VISIT_KEY = 'languageFirstVisit';

const detectBrowserLanguage = (): Language => {
  const browserLang = navigator.language.toLowerCase();
  if (browserLang.startsWith('es')) return 'es';
  if (browserLang.startsWith('fr')) return 'fr';
  if (browserLang.startsWith('pt')) return 'pt';
  return 'en';
};

export const LanguageProvider = ({ children }: { children: ReactNode }) => {
  const [language, setLanguageState] = useState<Language>(() => {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) return saved as Language;
    return detectBrowserLanguage();
  });

  useEffect(() => {
    const isFirstVisit = !localStorage.getItem(FIRST_VISIT_KEY);
    const savedLanguage = localStorage.getItem(STORAGE_KEY);

    if (isFirstVisit && !savedLanguage) {
      const detected = detectBrowserLanguage();
      setLanguageState(detected);
      localStorage.setItem(FIRST_VISIT_KEY, 'true');
      
      if (detected !== 'en') {
        toast({
          title: `Language set to ${languageNames[detected]}`,
          description: "Tap the language selector to change it anytime.",
          duration: 5000,
        });
      }
    }
  }, []);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    localStorage.setItem(STORAGE_KEY, lang);
  };

  const t = (key: keyof typeof translations.en): string => {
    return translations[language][key] || translations.en[key];
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within LanguageProvider');
  }
  return context;
};
